:root {
  --bg: #10121c;
  --fg: #e6e6e6;
  --muted: #a0a7b4;
  --card: #171a21;
  --accent: #5a7cfa;
  --danger: #ff4f64;
  --ok: #2ecc71;
  --border: #242a33;
  --drop: 0 2px 12px rgba(50,60,140,0.08);
  --input-bg: rgba(255,255,255,0.035);
}

body.theme-light {
  --bg: #f7f8fb;
  --fg: #171a21;
  --muted: #6b7280;
  --card: #ffffff;
  --accent: #4f7cff;
  --danger: #e11d48;
  --ok: #16a34a;
  --border: #d1d5db;
  --input-bg: #f0f2fa;
}

body {
  margin: 0;
  background: var(--bg) url('assets/background.jpg') center center/cover no-repeat;
  color: var(--fg);
  font: 15px/1.6 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  min-height: 100vh;
  transition: background 0.4s;
}

/* ---------- NAV + ICONS ---------- */
.nav-bar {
  display: flex; align-items: center; gap: 8px;
  padding: 12px 16px; border-bottom: 1px solid var(--border); background: var(--card);
  position: sticky; top: 0; z-index: 10; box-shadow: var(--drop);
}
.brand {
  font-size: 1.35em; font-weight: 700; letter-spacing: 0.5px; display: flex; align-items: center; gap: 8px;
}
.spacer { flex: 1; }
input.search {
  width: 230px; padding: 9px; border: 1px solid var(--border); border-radius: 9px;
  background: var(--input-bg); color: var(--fg); margin-right: 8px;
  transition: box-shadow 0.2s;
}
input.search:focus { outline: none; box-shadow: 0 0 0 2px var(--accent); }

/* ---------- BUTTONS ---------- */
/* Rectangle with soft rounded corners */
button,
input[type="submit"], input[type="button"] {
  font: inherit;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--input-bg);
  color: var(--fg);
  padding: 12px 22px;
  min-height: 40px;
  box-shadow: var(--drop);
  cursor: pointer;
  transition: background 0.15s, border 0.15s;
  margin: 0 2px;
}

button.primary {
  background: var(--accent);
  border: none;
  color: #fff;
  font-weight: 600;
}

button.ghost {
  background: transparent;
  color: var(--fg);
  border: 1px solid var(--border);
}

button.danger {
  background: var(--danger);
  border: none;
  color: #fff;
  font-weight: 600;
}

button.icon-btn {
  border-radius: 50%;
  border: none;
  min-width: 40px; min-height: 40px;
  background: transparent;
  padding: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.14s;
  margin: 0 2px;
}

button.icon-btn.end { background: var(--danger); color: #fff; }
button.icon-btn img { width: 24px; height: 24px; }

button.ghost:active, button.primary:active, button.danger:active {
  filter: brightness(0.96);
}

/* Remove shadows and ovals for all except .icon-btn */
button:not(.icon-btn) {
  box-shadow: var(--drop);
  border-radius: 8px;
}

input,
textarea {
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--input-bg);
  color: var(--fg);
  padding: 12px;
  min-height: 40px;
  margin: 0 2px;
}

/* ---------- LAYOUT ---------- */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--drop);
  padding: 24px;
  margin-bottom: 20px;
}

.container {
  max-width: 1000px;
  margin: 40px auto 24px auto;
  padding: 0 16px;
}
.container.narrow { max-width: 560px; }

.row {
  display: grid;
  grid-template-columns: 160px 1fr;
  align-items: center;
  gap: 14px;
  margin-bottom: 18px;
}
label { color: var(--muted); font-size: 1em; }

input[type="file"] { padding: 0; border: none; background: transparent; }

/* ---------- LISTS & AVATARS ---------- */
.list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid; gap: 13px;
}
.contact {
  display: grid;
  grid-template-columns: 48px 1fr 40px 120px;
  gap: 12px;
  align-items: center;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 13px 10px;
  box-shadow: var(--drop);
  position: relative;
}
.avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid var(--border); }
.avatar-lg { width: 86px; height: 86px; border-radius: 50%; object-fit: cover; border: 2px solid var(--border); }
.meta .name { font-weight: 600; font-size: 1.09em; }
.meta .num { color: var(--muted); margin-left: 8px; font-size: 13px; }
.presence { width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.presence.on { background: var(--ok); }
.presence.off { background: var(--border); }
.presence-icon { width: 14px; height: 14px; }

.actions { display: flex; gap: 8px; }
.toolbar { display: flex; justify-content: flex-end; margin: 8px 0; gap: 12px; }

.profile {
  display: flex; align-items: center; gap: 14px; margin-bottom: 18px;
}

/* ---------- CHAT ---------- */
.chat {
  height: calc(100vh - 60px); display: grid; grid-template-rows: 1fr auto;
  background: transparent;
}
.messages {
  list-style: none;
  margin: 0; padding: 18px;
  overflow-y: auto;
  display: grid; gap: 10px;
}
.bubble {
  max-width: 78%; min-width: 140px;
  padding: 13px 16px; border-radius: 13px;
  border: 1px solid var(--border);
  background: var(--card);
  box-shadow: var(--drop);
  display: flex; align-items: center; gap: 10px;
}
.bubble.me { justify-self: end; background: rgba(90,124,250,0.14); border-color: rgba(90,124,250,0.25); }
.bubble.them { justify-self: start; }
.bubble.deleted { opacity: 0.5; font-style: italic; }
.bubble .chat-icon { width: 18px; height: 18px; margin-right: 8px; }
.bubble .img { max-width: 230px; border-radius: 10px; display: block; margin-bottom: 10px; }
.bubble .meta.status { color: var(--muted); font-size: 12px; margin-top: 3px; }
.bubble .icon-btn.del { margin-left: 8px; }

.composer {
  display: grid; grid-template-columns: 1fr auto auto; gap: 10px;
  padding: 14px; border-top: 1px solid var(--border); background: var(--card);
}

/* ---------- CALL & VIDEO ---------- */
.call, .video { display: grid; place-items: center; height: calc(100vh - 60px); background: none; }
.call-card {
  display: grid; gap: 15px; place-items: center;
  background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 30px; width: 380px;
  box-shadow: var(--drop);
}
.title { font-weight: 700; font-size: 1.22em; margin-bottom: 12px; }

.remote-box {
  position: relative; width: 78vw; max-width: 900px; height: 50vh;
  background: #272b3c; border: 1px solid var(--border); border-radius: 14px;
  display: grid; place-items: center; box-shadow: var(--drop);
}
.remote { width: 100%; height: 100%; object-fit: cover; }
.local-box {
  position: fixed; right: 16px; bottom: 16px; width: 160px; height: 100px; background: #282b36;
  border: 1px solid var(--border); border-radius: 10px; overflow: hidden;
  box-shadow: var(--drop);
}
.local { width: 100%; height: 100%; object-fit: cover; }
.overlay {
  position: absolute; bottom: 16px; left: 16px; background: rgba(0,0,0,0.5); color: #fff; padding: 8px 14px;
  border-radius: 12px; font-weight: 500; font-size: 1em;
}

/* ---------- MISC ---------- */
.hidden { display: none !important; }

.popup {
  position: fixed; inset: 0; background: rgba(0,0,0,0.61); display: grid; place-items: center; z-index: 100;
}
.popup.hidden { display: none; }
.popup-card {
  width: 370px; background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px;
  box-shadow: var(--drop);
}
.popup-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; }

/* ----------- MEDIA ----------- */
@media (max-width: 900px) {
  .container { max-width: 98vw; }
  .remote-box { width: 98vw; }
}
@media (max-width: 600px) {
  .container { padding: 0 10px;}
  .contact { grid-template-columns: 38px 1fr 32px 60px; }
  .row { grid-template-columns: 1fr;}
}
