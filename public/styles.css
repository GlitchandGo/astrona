:root {
  --bg: #0f1115;
  --fg: #e6e6e6;
  --muted: #a0a7b4;
  --card: #171a21;
  --accent: #4f7cff;
  --danger: #ff4f64;
  --ok: #2ecc71;
  --border: #242a33;
}

body.theme-light {
  --bg: #f7f8fb;
  --fg: #1b1f25;
  --muted: #6b7280;
  --card: #ffffff;
  --accent: #3056ff;
  --danger: #e11d48;
  --ok: #16a34a;
  --border: #e5e7eb;
}

* { box-sizing: border-box; }
body { margin: 0; background: var(--bg); color: var(--fg); font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

.nav-bar {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px; border-bottom: 1px solid var(--border); background: var(--card);
  position: sticky; top: 0; z-index: 10;
}
.brand { font-weight: 700; letter-spacing: 0.5px; }
.spacer { flex: 1; }
.search { width: 240px; padding: 8px; border: 1px solid var(--border); border-radius: 8px; background: transparent; color: var(--fg); }

.container { max-width: 980px; margin: 24px auto; padding: 0 16px; }
.container.narrow { max-width: 640px; }

.card {
  background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; margin-bottom: 16px;
}
.row { display: grid; grid-template-columns: 160px 1fr; align-items: center; gap: 12px; margin-bottom: 12px; }
label { color: var(--muted); }
input, button { font: inherit; }
input[type="text"], input[type="email"], input[type="password"], input[type="tel"], input[type="file"] {
  padding: 10px; border: 1px solid var(--border); border-radius: 8px; background: transparent; color: var(--fg);
}

button { padding: 8px 12px; border: 1px solid var(--border); background: transparent; color: var(--fg); border-radius: 8px; cursor: pointer; }
button.primary { background: var(--accent); border: none; color: white; }
button.ghost { background: transparent; }
button.danger { background: var(--danger); border: none; color: white; }

.list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
.contact { display: grid; grid-template-columns: 48px 1fr auto auto; gap: 12px; align-items: center; background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
.avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid var(--border); position: relative; }
.avatar-lg { width: 96px; height: 96px; border-radius: 50%; object-fit: cover; border: 1px solid var(--border); }
.meta .name { font-weight: 600; }
.meta .num { color: var(--muted); margin-left: 8px; font-size: 12px; }
.presence { width: 10px; height: 10px; border-radius: 50%; border: 2px solid var(--card); justify-self: center; }
.presence.on { background: var(--ok); }
.presence.off { background: var(--border); }

.toolbar { display: flex; justify-content: flex-end; margin: 12px 0; }

.chat { height: calc(100vh - 60px); display: grid; grid-template-rows: 1fr auto; }
.messages { list-style: none; margin: 0; padding: 16px; overflow-y: auto; display: grid; gap: 8px; }
.bubble { max-width: 65%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); }
.bubble.me { justify-self: end; background: rgba(79,124,255,0.12); border-color: rgba(79,124,255,0.35); }
.bubble.deleted { opacity: 0.6; font-style: italic; }
.bubble .img { max-width: 280px; border-radius: 8px; display: block; margin-bottom: 8px; }
.bubble .meta.status { color: var(--muted); font-size: 12px; margin-top: 4px; }
.composer { display: grid; grid-template-columns: 1fr auto auto; gap: 8px; padding: 12px; border-top: 1px solid var(--border); background: var(--card); }

.call, .video { display: grid; place-items: center; height: calc(100vh - 60px); }
.call-card { display: grid; gap: 16px; place-items: center; background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; width: 420px; }
.title { font-weight: 700; }

.remote-box { position: relative; width: 80vw; max-width: 900px; height: 50vh; background: #101318; border: 1px solid var(--border); border-radius: 12px; display: grid; place-items: center; }
.remote { width: 100%; height: 100%; object-fit: cover; }
.local-box { position: fixed; right: 16px; bottom: 16px; width: 180px; height: 120px; background: #101318; border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
.local { width: 100%; height: 100%; object-fit: cover; }
.overlay { position: absolute; bottom: 12px; left: 12px; background: rgba(0,0,0,0.5); color: #fff; padding: 6px 10px; border-radius: 8px; }
.hidden { display: none; }

.profile { display: flex; align-items: center; gap: 12px; }

.popup { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: grid; place-items: center; }
.popup.hidden { display: none; }
.popup-card { width: 360px; background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; }
.popup-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; }

@media (max-width: 768px) {
  .container { padding: 0 8px; }
  .contact { grid-template-columns: 40px 1fr auto; }
  .row { grid-template-columns: 1fr; }
  .remote-box { width: 95vw; height: 45vh; }
  .local-box { width: 140px; height: 96px; }
}
